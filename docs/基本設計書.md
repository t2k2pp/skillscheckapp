# 基本設計書 - スキルチェッカーアプリケーション

## 1. 概要

本ドキュメントは、「要求仕様書」に基づき、「スキルチェッカーアプリケーション」の基本的なシステム設計を定義するものである。

## 2. システムアーキテクチャ

本システムは、静的なファイル配信を基本とするクライアントサイドアプリケーションとして構築される。ユーザーのブラウザ上で動作するReact製のシングルページアプリケーション(SPA)であり、バックエンドサーバーを必要としない（ただし、コンテンツの管理には別ツールとして「学習コンテンツ管理ツール」が存在する）。

- **アプリケーション本体:**
  - ReactとTypeScriptで構築されたSPA。
  - Viteをビルドツールとして使用する。
  - ユーザーの操作に応じて、コンポーネントを動的に切り替えることで画面遷移を実現する。

- **データソース:**
  - アプリケーションと同じサーバーに配置された静的なJSONファイル群 (`/public/question-sets/`)。
  - アプリケーションは、`fetch` APIを用いてこれらのJSONファイルを非同期に読み込み、利用する。

## 3. 主要コンポーネント（画面）構成

アプリケーションは、状態（`quizState`）に応じて表示が切り替わる複数の画面コンポーネントから構成される。

- **`BookSelectionScreen`**: 学習コンテンツ（問題集やEbook）を選択する初期画面。
- **`LearningCategoryScreen`**: 選択したコンテンツの利用方法（クイズ、辞書など）を選択する画面。
- **`QuizModeSelectionScreen`**: クイズの実行モード（1問1答、スタンダードなど）を選択する画面。
- **`PatternSelectionScreen`**: スタンダードモードにおける出題パターンを選択する画面。
- **`QuestionCard` / `OneByOneQuestionCard`**: 問題を表示し、ユーザーの解答を受け付ける画面。
- **`ResultsScreen`**: クイズの結果を表示する画面。
- **`DictionaryScreen` / `DictionaryDetailCard`**: 辞書モードの画面。
- **`EbookViewer` / `PDFViewer` / `VideoViewer`**: 各種コンテンツ形式に対応したビューア画面。

## 4. データフロー（クイズ実行時）

1.  **コンテンツ選択:** ユーザーが`BookSelectionScreen`で問題集を選択する。
2.  **インデックス読込:** `App.tsx`が`question-sets/index.json`を読み込み、選択された問題集のIDを取得する。
3.  **問題データ読込:** `QuestionLoader.ts`が、IDに対応する`<id>.json`ファイルを`fetch`で読み込む。
4.  **状態管理:** 読み込まれた問題データは、`App.tsx`のReact stateに保持される。
5.  **画面遷移とデータ受け渡し:** ユーザーがモードやパターンを選択するのに応じて、`App.tsx`がstateを更新し、表示する画面コンポーネントを切り替える。各画面コンポーネントは、必要なデータ（問題リスト、現在の問題番号など）をPropsとして受け取る。
6.  **結果計算:** クイズが終了すると、`App.tsx`に蓄積されたユーザーの解答履歴（`userAnswers`）と問題データを`ResultsScreen`に渡し、結果が表示される。

## 5. 使用技術 (技術スタック)

| カテゴリ       | 技術・ライブラリ        |
|----------------|-------------------------|
| 言語           | TypeScript              |
| フレームワーク | React                   |
| ビルドツール   | Vite                    |
| スタイリング   | Tailwind CSS            |
